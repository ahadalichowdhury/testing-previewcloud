services:
  api:
    dockerfile: ./backend/Dockerfile
    port: 5000
    env:
      - DATABASE_URL=${DATABASE_URL}
      - API_KEY=${API_KEY}

  frontend:
    dockerfile: ./frontend/Dockerfile
    port: 80 # Changed from 3000 to 80 (nginx listens on port 80)
    env:
      - API_URL=${API_URL}

database:
  type: postgres
  migrations: ./migrations
